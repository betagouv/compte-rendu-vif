// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    id        String   @id @default(cuid())
    email     String   @unique
    name      String?
    password  String
    createdAt DateTime
    updatedAt DateTime @updatedAt
    reports   Report[]
}

model Report {
    id                  String   @id @default(cuid())
    title               String
    authorId            String
    meetDate            DateTime
    meetLink            String
    applicantName       String
    applicantType       String
    projectStatus       String
    projectCadastralRef String
    projectLandContact  String
    projectSpaceType    String
    projectNature       String
    projectDescription  String
    decision            String
    decisionComment     String
    contacts            String
    createdAt           DateTime
    updatedAt           DateTime @updatedAt

    author         User             @relation(fields: [authorId], references: [id])
    ReportToClause ReportToClause[]
}

model ReportToClause {
    reportId String
    clauseId String
    report   Report @relation(fields: [reportId], references: [id])
    clause   Clause @relation(fields: [clauseId], references: [id])

    @@id([reportId, clauseId])
}

model Clause {
    id    String @id @default(cuid())
    label String
    value String

    ReportToClause ReportToClause[]
}
